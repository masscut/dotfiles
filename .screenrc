#---------------------------------------------------------------------------------
### Pandemonium
#---------------------------------------------------------------------------------
# To  use mouse.   XT capability  is screen  specific, not  seen in  the system
# termcap / terminfo.
termcapinfo * XT

# Z0/Z1 are also screen specific.
termcapinfo xterm*|kterm*|screen* Z0=\E[?3h:Z1=\E[?3l

# To use hardware status line
termcapinfo xterm*|kterm*|screen* hs:ts=\E]0;:fs=\007:ds=\E]0;\007
hardstatus on

# To use 256 colors. AB/AF are also screen specific.
termcapinfo xterm*|kterm*|screen* Co#256:pa#32767:AB=\E[48;5;%dm:AF=\E[38;5;%dm
defbce on

# To use resize-window
termcapinfo xterm*|kterm*|screen* is=\E[r\E[m\E[2J\E[H\E[?7h\E[?1;4;6l

#---------------------------------------------------------------------------------
### Display
#---------------------------------------------------------------------------------
# $TERM for 256 color (screen needs --enable-colors256 configure option)
term xterm-256color

# Wait seconds for messages
msgwait 2
msgminwait 0

#Use bright colors for bold text.
attrcolor b ".I"

# Last line status (clock, window list, hostname)
hardstatus alwayslastline '%{= .W}%-w%{.rW}%n %t%{-}%+w %=%{..G}%H %{..y}%m/%d %02c:%s'

# Caption for each window (window num, flag, title)
caption always '%?%F%{= bW}%:%{= Kk}%?%2n%f%07=%t%='

#---------------------------------------------------------------------------------
### Buffer and log
# scroll buffer (lines)
#---------------------------------------------------------------------------------
defscrollback 10240

# buffer byte size of screen?
termcapinfo xterm* OL=8196

# logging
#deflog on
#logfile "var/log/screen/%Y%m%d-%n.log"

#---------------------------------------------------------------------------------
### Behavior
#---------------------------------------------------------------------------------
# New windo uses home dir
chdir

# Confirm when a window is finished
#zombie kr

# Protection from attacks
multiuser off
idle off

# No visible bell
vbell off

# Use autodetach because of using unstable client
autodetach on

# No startup message
startup_message off

# No login, otherwise /var/run/utemp will be squashed.
deflogin off

# Alternate screen for vim, less, etc.
altscreen on

#---------------------------------------------------------------------------------
### key bind
#---------------------------------------------------------------------------------

bind w  windowlist -b

bindkey "^[[1;5A" colon 'screen 1 ssh '
bindkey "^[[1;5B" screen 0
bindkey "^[[1;5C" next
bindkey "^[[1;5D" prev

# Split key bind
bind s eval split focus screen
bind v eval "split -v" focus screen
bind o only
bind r remove

# Shift+cursor for focus
bindkey "^[[1;2A" focus up
bindkey "^[[1;2B" focus down
bindkey "^[[1;2C" focus right
bindkey "^[[1;2D" focus left

# Ctrl+Shift+cursor for resize
bindkey "^[[1;6A" resize -v -l +1
bindkey "^[[1;6B" resize -v -l -1
bindkey "^[[1;6C" resize -h -l -1
bindkey "^[[1;6D" resize -h -l +1

#---------------------------------------------------------------------------------
### Layout
#---------------------------------------------------------------------------------
# Layout shortcut
bind 0 eval 'layout select 0' 'layout show'
bind 1 eval 'layout select 1' 'layout show'
bind 2 eval 'layout select 2' 'layout show'

# Layout operation mode
bind ^L eval 'command -c layout' 'layout show'
#bind -c layout c eval 'layout new 1' 'select 1' 'echo "Create new layout"'
#bind -c layout r eval 'layout remove' 'echo "Remove layout"'
bind -c layout n eval 'layout next' 'command -c layout' 'layout show'
bind -c layout p eval 'layout prev' 'command -c layout' 'layout show'

# create window
screen 0
screen 1

# create layout
layout new 0:layout0:only
layout new 1:layout1:vertical
layout new 2:layout2:horizontal

layout select 0

layout select 1
select 0
split -v
focus right
select 1
focus left

layout select 2
select 1
split
focus down
select 2
focus up

layout select 0
select 0
